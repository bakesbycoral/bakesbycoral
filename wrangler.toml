name = "bakes-by-coral"
main = ".open-next/worker.js"
compatibility_date = "2024-09-23"
compatibility_flags = ["nodejs_compat"]

[assets]
directory = ".open-next/assets"

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "bakes-coral-db"
database_id = "2ea77357-2926-4597-8fae-d5f3646cf1ab"

# R2 Storage for uploads (inspiration images, etc.)
[[r2_buckets]]
binding = "UPLOADS"
bucket_name = "bakes-coral-uploads"

# Environment variables (secrets set via `wrangler secret put`)
[vars]
NEXT_PUBLIC_SITE_URL = "https://bakes-by-coral.coral-44f.workers.dev"
# Note: bakesbycoral_session_secret should be set via: wrangler secret put bakesbycoral_session_secret

# Pickup reminders cron: OpenNext doesn't support Cloudflare scheduled events,
# so call the HTTP endpoint externally (daily at 9 AM EST / 14:00 UTC):
#   GET /api/cron/reminders with header: Authorization: Bearer <bakesbycoral_cron_secret>
